(function(e){function t(t){for(var n,i,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={transaction_history:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([3,"chunk-vendors"]),a()})({"06fe":function(e,t,a){"use strict";var n=a("12e8"),r=a.n(n);r.a},"0964":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d28b"),a("4160"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("96cf");var n=a("9f12"),r=a("53fe"),s=function(){function e(){Object(n["a"])(this,e)}return Object(r["a"])(e,[{key:"getPreferences",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(new Promise((function(t,a){chrome.storage.sync.get(e,(function(e){var a=e;t(a)}))})));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}},{key:"setPreferences",value:function(e){chrome.storage.sync.set(e)}},{key:"getProcessDetails",value:function(e,t){var a,n,r,s,i,o,c,u,l,d,p;return regeneratorRuntime.async((function(f){while(1)switch(f.prev=f.next){case 0:return f.next=2,regeneratorRuntime.awrap(this.getPreferences({commerceProcessVarNames:""}));case 2:a=f.sent,n=a.commerceProcessVarNames.split("\n"),r=t.split(".")[0],s={},i=!0,o=!1,c=void 0,f.prev=9,u=n[Symbol.iterator]();case 11:if(i=(l=u.next()).done){f.next=20;break}if(d=l.value,p=d.split(":"),5!==p.length||p[1]!==e&&p[2]!==e||p[0]!==r){f.next=17;break}return s={site:p[0],processId:p[1],processVarName:p[2],transactionVarName:p[3],transactionLineVarName:p[4]},f.abrupt("break",20);case 17:i=!0,f.next=11;break;case 20:f.next=26;break;case 22:f.prev=22,f.t0=f["catch"](9),o=!0,c=f.t0;case 26:f.prev=26,f.prev=27,i||null==u.return||u.return();case 29:if(f.prev=29,!o){f.next=32;break}throw c;case 32:return f.finish(29);case 33:return f.finish(26);case 34:return f.abrupt("return",s);case 35:case"end":return f.stop()}}),null,this,[[9,22,26,34],[27,,29,33]])}},{key:"convertProcessDetailsToJson",value:function(e){var t=e.split("\n"),a=new Array;return t.forEach((function(e){var t=e.split(":");5===t.length&&a.push({site:t[0],processId:t[1],processVarName:t[2],transactionVarName:t[3],transactionLineVarName:t[4]})})),a}}]),e}()},"12e8":function(e,t,a){},3:function(e,t,a){e.exports=a("f2d8")},"39d9":function(e,t,a){"use strict";var n=a("ef82"),r=a.n(n);r.a},"4b7e":function(e,t,a){"use strict";var n=a("ea3d"),r=a.n(n);r.a},"74d2":function(e,t,a){"use strict";var n=a("a8e9"),r=a.n(n);r.a},"9aac":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("99af"),a("d3b7"),a("96cf");var n=a("9f12"),r=a("53fe"),s=a("0964"),i=a("1157"),o=a.n(i),c=a("98fc"),u=a.n(c),l=function(){function e(t,a){Object(n["a"])(this,e),this.hostname=t,this.prefSvc=a||new s["a"]}return Object(r["a"])(e,[{key:"getTransaction",value:function(e,t){var a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.getHeaderUrl(e,t));case 2:return a=n.sent,n.abrupt("return",new Promise((function(e,t){o.a.ajax({url:a,success:function(t){e(t)}})})));case 4:case"end":return n.stop()}}),null,this)}},{key:"getTransactionLines",value:function(e,t){var a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.getLinesUrl(e,t));case 2:return a=n.sent,n.abrupt("return",new Promise((function(e,t){o.a.ajax({url:a,success:function(t){e(t)}})})));case 4:case"end":return n.stop()}}),null,this)}},{key:"getHeaderUrl",value:function(e,t){var a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if("localhost"!==this.hostname){n.next=4;break}return n.abrupt("return","http://localhost:8080/test_data/header_".concat(e,".json"));case 4:return n.next=6,regeneratorRuntime.awrap(this.prefSvc.getProcessDetails(t,this.hostname));case 6:return a=n.sent,n.abrupt("return","https://".concat(this.hostname,".bigmachines.com/rest/v6/commerceDocuments").concat(this.capitalize(a.processVarName)).concat(this.capitalize(a.transactionVarName),"/").concat(e));case 8:case"end":return n.stop()}}),null,this)}},{key:"getLinesUrl",value:function(e,t){var a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if("localhost"!==this.hostname){n.next=4;break}return n.abrupt("return","http://localhost:8080/test_data/transactionLines_".concat(e,".json"));case 4:return n.next=6,regeneratorRuntime.awrap(this.prefSvc.getProcessDetails(t,this.hostname));case 6:return a=n.sent,n.abrupt("return","https://".concat(this.hostname,".bigmachines.com/rest/v6/commerceDocuments").concat(this.capitalize(a.processVarName)).concat(this.capitalize(a.transactionVarName),"/").concat(e,"/").concat(a.transactionLineVarName));case 8:case"end":return n.stop()}}),null,this)}},{key:"getTransactionHistoryUrl",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if("localhost"!==this.hostname){t.next=4;break}return t.abrupt("return","http://localhost:8080/test_data/history_".concat(e,".xml"));case 4:return t.abrupt("return","https://".concat(this.hostname,".bigmachines.com/admin/commerce/views/preview_xml.jsp?bs_id=").concat(e,"&view_type=history"));case 5:case"end":return t.stop()}}),null,this)}},{key:"getTransactionHistory",value:function(e){var t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.getTransactionHistoryUrl(e));case 2:return t=a.sent,a.abrupt("return",new Promise((function(e,a){o.a.ajax({url:t,success:function(t){var a=new u.a;e(a.dom2js(t))}})})));case 4:case"end":return a.stop()}}),null,this)}},{key:"capitalize",value:function(e){return e?"".concat(e.substring(0,1).toUpperCase()).concat(e.substring(1,e.length)):e}}]),e}()},a8e9:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.cd2c695a.png"},ea3d:function(e,t,a){},ef82:function(e,t,a){},f2d8:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("side-navigation")],1),n("v-toolbar",{attrs:{app:"",dense:"",dark:"",flat:"",color:"primary"}},[n("v-toolbar-side-icon",{on:{click:function(t){return t.stopPropagation(),e.toggleDrawer()}}}),n("v-spacer"),n("v-btn",{attrs:{flat:"",href:"http://bigtools.piercewashington.com",target:"bigToolsAdmin"}},[e._v("BigTools "),n("img",{attrs:{id:"bt-logo",src:a("cf05")}})])],1),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1)],1)},s=[],i=a("9f12"),o=a("53fe"),c=a("8b83"),u=a("c65a"),l=a("c03e"),d=a("9ab4"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{dense:"",dark:"",flat:"",color:"primary"}},[a("v-toolbar-title",[e._v(" CPQ Transaction History ")])],1),a("v-expansion-panel",{attrs:{expand:e.expand,focusable:""}},e._l(e.steps,(function(t,n){return a("v-expansion-panel-content",{key:n,attrs:{value:0==n}},[a("div",{staticClass:"bt-header3",attrs:{slot:"header"},slot:"header"},[e._v(e._s(t[0]._step_var_name))]),a("v-card",[a("v-list",{attrs:{dense:""}},e._l(t,(function(t,r){return a("v-list-tile",{key:r,attrs:{ripple:"",to:"/transactionHistory/"+e.site+"/"+e.processId+"/"+e.bsId+"/actionDetails/"+n+"/"+r}},[a("v-list-tile-title",[e._v(e._s(t._action_name))])],1)})),1)],1)],1)})),1)],1)},f=[],h=a("2fe1"),v=a("60a3"),m=a("2f62"),b="site",_="bsId",g="processId",x=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).call(this)),e.expand=!0,e.site="",e.bsId="",e.processId="",e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=this.$router.currentRoute.params;this.site=e[b],this.bsId=e[_],this.processId=e[g]}}]),t}(v["c"]);x=Object(d["a"])([Object(h["b"])({name:"SideNavigation",computed:Object(m["b"])(["steps"])})],x);var y=x,w=y,O=(a("39d9"),a("2877")),j=Object(O["a"])(w,p,f,!1,null,null,null),S=j.exports,I=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).call(this)),e.drawer=!0,e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"toggleDrawer",value:function(){this.drawer=!this.drawer}}]),t}(v["c"]);I=Object(d["a"])([Object(v["a"])({components:{SideNavigation:S}})],I);var k=I,T=k,V=(a("06fe"),Object(O["a"])(T,r,s,!1,null,null,null)),N=V.exports,P=(a("bf40"),a("ce5b")),D=a.n(P),E=a("8c4f"),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"pa-1":"","ma-1":"",fluid:"",id:"transaction-header"}},[a("v-layout",[a("v-flex",[a("h2",[a("v-icon",[e._v("history")]),e._v(" Transaction History: bsId = "+e._s(e.bsId)+"; site = "+e._s(e.site))],1),a("v-divider"),a("router-view")],1)],1)],1)},R=[],H=(a("d3b7"),a("96cf"),a("9aac")),A=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).call(this)),e.site="",e.bsId="",e.processId="",e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"hasStepChanged",value:function(e,t){return 0===t||e[t-1]._step_var_name!==e[t]._step_var_name}},{key:"mounted",value:function(){var e,t,a,n,r,s,i,o,c,u;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:return e=this.$router.currentRoute.params,t="site",a="bsId",n="processId",this.site=e[t],this.bsId=e[a],this.processId=e[n],this.$store.commit("SET_SITE",this.site),this.$store.commit("SET_BS_ID",this.bsId),this.$store.commit("SET_PROCESS_ID",this.processId),r=new H["a"](this.site),l.next=13,regeneratorRuntime.awrap(r.getTransactionHistory(this.bsId));case 13:for(s=l.sent,i=s.change_history.change_item,o=[],u=0;u<i.length;u++)this.hasStepChanged(i,u)?(c=[],o.push(c)):c=o[o.length-1],c.push(i[u]);this.$store.commit("SET_STEPS",o);case 18:case"end":return l.stop()}}),null,this)}}]),t}(v["c"]);A=Object(d["a"])([Object(h["b"])({name:"TransactionHistory"})],A);var L=A,$=L,M=(a("74d2"),Object(O["a"])($,C,R,!1,null,null,null)),U=M.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",[a("v-flex",[a("v-card",{staticClass:"mt-2"},[a("v-card-title",[a("div",[a("h3",[e._v("Action: "+e._s(e.actionData._action_name)+" ("+e._s(e.actionData._action_var_name)+")")]),a("div",[e._v("Change by "+e._s(e.actionData._user_first_name)+" "+e._s(e.actionData._user_last_name)+" ("+e._s(e.actionData._user_login)+") at "+e._s(e.actionData._change_date)+" ")])])])],1),e.headerAttributes.length>0?a("v-expansion-panel",{staticClass:"mt-2",attrs:{expand:e.expand}},[a("v-expansion-panel-content",{attrs:{expand:"",value:"0"}},[a("div",{staticClass:"bt-header3",attrs:{slot:"header"},slot:"header"},[e._v("Transaction Header")]),a("v-card",[a("v-flex",{attrs:{xs12:"",sm8:"",md4:"",lg3:"","offset-sm4":"","offset-md8":"","offset-lg9":""}},[a("v-text-field",{staticClass:"pl-4 pr-4",attrs:{label:"Enter search terms separated by ','"},model:{value:e.headerSearch,callback:function(t){e.headerSearch=t},expression:"headerSearch"}})],1),a("v-data-table",{attrs:{id:"transaction-data",search:e.headerSearch,"custom-filter":e.customFilter,headers:e.headers,items:e.headerAttributes,pagination:e.pagination,"rows-per-page-items":[200,400,800,1600]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left align-top varName"},[e._v(e._s(t.item.varName))]),a("td",{staticClass:"text-xs-left align-top header-value",domProps:{innerHTML:e._s(t.item.oldValue)}}),a("td",{staticClass:"text-xs-left align-top header-value",domProps:{innerHTML:e._s(t.item.newValue)}})]}}],null,!1,1034286771)})],1)],1)],1):e._e(),e.lineAttributes.length>0?a("v-expansion-panel",{staticClass:"mt-2",attrs:{expand:e.expand}},[a("v-expansion-panel-content",{attrs:{expand:"",value:"0"}},[a("div",{staticClass:"bt-header3",attrs:{slot:"header"},slot:"header"},[e._v("Transaction Line")]),a("v-card",[a("v-flex",{attrs:{xs12:"",sm8:"",md4:"",lg3:"","offset-sm4":"","offset-md8":"","offset-lg9":""}},[a("v-text-field",{staticClass:"pl-4 pr-4",attrs:{label:"Enter search terms separated by ','"},model:{value:e.lineSearch,callback:function(t){e.lineSearch=t},expression:"lineSearch"}})],1),a("v-data-table",{attrs:{id:"transaction-data",search:e.lineSearch,"custom-filter":e.customFilter,headers:e.lineHeaders,items:e.lineAttributes,pagination:e.pagination,"rows-per-page-items":[200,400,800,1600]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{attrs:{classs:"text-xs-left align-top varName"}},[e._v(e._s(t.item.varName))]),a("td",{staticClass:"text-xs-left align-top document-number"},[e._v(e._s(t.item.docNum))]),a("td",{staticClass:"text-xs-left align-top line-value",domProps:{innerHTML:e._s(t.item.oldValue)}}),a("td",{staticClass:"text-xs-left align-top line-value",domProps:{innerHTML:e._s(t.item.newValue)}})]}}],null,!1,1650749166)})],1)],1)],1):e._e()],1)],1)},B=[],F=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("4160"),a("c975"),a("0d03"),a("b64b"),a("e25e"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("498a"),a("159b"),a("ddb0"),a("ff6d")),J="stepIndex",Q="actionIndex",q=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.headerAttributes=[],e.lineAttributes=[],e.stepIndex=0,e.actionIndex=0,e.steps=[],e.expand=!0,e.actionData={},e.headerSearch="",e.lineSearch="",e.headers=[{text:"Variable Name ",value:"varName",align:"left",sortable:!0},{text:"Old Value",value:"oldValue",align:"left",sortable:!0},{text:"New Value",value:"newValue",align:"left",sortable:!0}],e.lineHeaders=[{text:"Variable Name ",value:"varName",align:"left",sortable:!0},{text:"Document No. ",value:"docNum",align:"left",sortable:!0},{text:"Old Value",value:"oldValue",align:"left",sortable:!0},{text:"New Value",value:"newValue",align:"left",sortable:!0}],e.pagination={page:1,rowsPerPage:200,totalItems:0},e.pages=0,e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"customFilter",value:function(e,t,a){return t=t.toString().toLowerCase(),e.filter((function(e){var a=t.split(","),n=!0,r=!1,s=void 0;try{for(var i,o=a[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;if(c=c.trim(),e.varName.toLowerCase().indexOf(c)>-1||void 0!==e.docNum&&e.docNum===c||e.oldValue&&e.oldValue.toLowerCase().indexOf(c)>-1||e.newValue&&e.newValue.toLowerCase().indexOf(c)>-1)return!0}}catch(u){r=!0,s=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}}))}},{key:"onRouteChange",value:function(){this.refreshData()}},{key:"refreshData",value:function(){var e=this,t=this.$router.currentRoute.params,a=t[J];this.stepIndex=Object(F["a"])(a)?parseInt(a,10):0;var n=t[Q];this.actionIndex=Object(F["a"])(n)?parseInt(n,10):0;var r=this.$store.state.steps;r.length>this.stepIndex&&(this.actionData=this.$store.state.steps[this.stepIndex][this.actionIndex],this.headerAttributes=[],this.lineAttributes=[],Object.keys(this.actionData).forEach((function(t){var a=e.actionData[t],n=a instanceof Array;if(void 0!==a._document_number||n)if("1"===a._document_number)e.headerAttributes.push({varName:t,oldValue:a._old_value,newValue:a._new_value});else if(n){var r=a;r.forEach((function(a){e.lineAttributes.push({varName:t,docNum:a._document_number,oldValue:a._old_value,newValue:a._new_value})}))}else e.lineAttributes.push({varName:t,docNum:a._document_number,oldValue:a._old_value,newValue:a._new_value})})))}},{key:"mounted",value:function(){this.refreshData()}}]),t}(v["c"]);Object(d["a"])([Object(v["d"])("$route")],q.prototype,"onRouteChange",null),Object(d["a"])([Object(v["d"])("$store.state.steps")],q.prototype,"refreshData",null),q=Object(d["a"])([Object(v["a"])({name:"ActionDetails"})],q);var G=q,K=G,W=(a("4b7e"),Object(O["a"])(K,z,B,!1,null,null,null)),X=W.exports;n["default"].use(E["a"]);var Y=new E["a"]({base:"/",routes:[{path:"/transactionHistory/:site/:processId/:bsId",name:"transactionHistory",component:U,children:[{path:"actionDetails/:stepIndex/:actionIndex",name:"actionDetails",component:X}]}]});n["default"].use(m["a"]);var Z=new m["a"].Store({state:{steps:Array(),site:"",processId:"",bsId:""},mutations:{SET_STEPS:function(e,t){e.steps=t},SET_SITE:function(e,t){e.site=t},SET_PROCESS_ID:function(e,t){e.processId=t},SET_BS_ID:function(e,t){e.bsId=t}},actions:{setSteps:function(e,t){var a=e.commit;a("SET_STEPS",t)},setSite:function(e,t){var a=e.commit;a("SET_SITE",t)},setProcessId:function(e,t){var a=e.commit;a("SET_PROCESS_ID",t)},setBsId:function(e,t){var a=e.commit;a("SET_BS_ID",t)}}});n["default"].config.productionTip=!1,n["default"].use(D.a),new n["default"]({router:Y,store:Z,render:function(e){return e(N)}}).$mount("#app")}});
//# sourceMappingURL=transaction_history.5ed91973.js.map